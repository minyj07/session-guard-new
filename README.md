# session-guard-new

# Session Guard (New)

## 설명

Session Guard (New)는 웹 페이지의 세션 토큰을 동적으로 탐지하고, 해당 토큰이 외부로 유출되는 것을 방지하는 고급 크롬 확장 프로그램입니다. 이 확장 프로그램은 `webRequest` API와 페이지 직접 주입(injection) 기술을 사용하여 사용자의 민감한 정보가 악의적인 웹사이트로 전송되는 것을 막아 보안을 강화합니다.

## 주요 기능

*   **동적 토큰 탐지:** 현재 페이지의 쿠키, 숨겨진 HTML 입력 필드, 웹 스토리지(`localStorage`, `sessionStorage`)에서 잠재적인 세션 토큰을 자동으로 식별합니다.
*   **`webRequest` 기반 동적 차단:** `webRequest` API를 사용하여, 탐지된 토큰이 URL에 포함된 채로 다른 도메인으로 전송되는 요청을 실시간으로 차단합니다. 이를 통해 `declarativeNetRequest`보다 더 유연하고 동적인 보호를 제공합니다.
*   **페이지 주입을 통한 고급 감시 (`injector.js`):**
    *   **`console.log` 감시:** 페이지의 스크립트가 `console.log`를 사용하여 토큰을 출력하는 행위를 탐지합니다.
    *   **POST 본문 감시:** `fetch` API를 감시하여, 요청의 본문(body)에 토큰이 포함된 채로 다른 도메인이나 의심스러운 경로로 전송되는 것을 탐지합니다.
*   **실시간 로깅 및 제어:**
    *   차단되거나 감지된 모든 보안 이벤트는 실시간으로 기록되며, 확장 프로그램의 팝업 창에서 확인할 수 있습니다.
    *   팝업 창에서 각 보호 기능(URL 요청 차단, 콘솔 로그 감지, POST 본문 감지)을 개별적으로 켜고 끌 수 있는 제어 기능을 제공합니다.

## 설치 및 사용법

1.  이 저장소를 로컬 컴퓨터에 복제하거나 다운로드합니다.
2.  Chrome 브라우저를 열고 `chrome://extensions`로 이동합니다.
3.  오른쪽 상단의 '개발자 모드'를 활성화합니다.
4.  '압축 해제된 확장 프로그램을 로드합니다' 버튼을 클릭하고, 다운로드한 `session-guard-new` 폴더를 선택합니다.
5.  확장 프로그램이 설치되면, 웹 서핑을 하는 동안 자동으로 보안 위협을 감시하고 차단합니다. 팝업 아이콘을 클릭하여 탐지 기록을 확인하고 설정을 변경할 수 있습니다.

## 파일 구조

*   `manifest.json`: 확장 프로그램의 기본 설정 파일입니다. `webRequestBlocking` 권한과 `injector.js`를 웹 페이지에서 접근 가능하도록 설정합니다.
*   `background.js`: 서비스 워커로, `webRequest` 리스너를 등록하고, 토큰을 관리하며, 모든 보안 이벤트를 로깅하는 핵심 로직을 처리합니다.
*   `content.js`: 웹 페이지에 삽입되어 토큰을 탐지하고, `injector.js`를 페이지에 주입하며, injector와 백그라운드 스크립트 간의 통신을 담당합니다.
*   `injector.js`: 웹 페이지의 컨텍스트에 직접 주입되어, `console.log`와 `fetch`와 같은 네이티브 API를 재정의(monkey-patching)하여 토큰 유출을 감시합니다.
*   `popup.html` & `popup.js`: 확장 프로그램 아이콘을 클릭했을 때 나타나는 팝업 창의 UI와 기능을 담당합니다. (탐지 기록 표시, 설정 변경)
*   `rules.json`: 현재는 사용되지 않지만, `declarativeNetRequest` 규칙을 위해 남겨진 파일입니다.
*   `images/`: 확장 프로그램에서 사용되는 아이콘 이미지 파일이 포함되어 있습니다.
